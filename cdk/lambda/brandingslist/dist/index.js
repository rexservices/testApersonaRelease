"use strict";var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var g=(s,e)=>{for(var o in e)l(s,o,{get:e[o],enumerable:!0})},y=(s,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of A(e))!u.call(s,t)&&t!==o&&l(s,t,{get:()=>e[t],enumerable:!(r=p(e,t))||r.enumerable});return s};var C=s=>y(l({},"__esModule",{value:!0}),s);var m={};g(m,{handler:()=>f});module.exports=C(m);var i=require("@aws-sdk/client-s3"),O=new i.S3Client({region:process.env.AWS_REGION}),S=[process.env.SPPORTAL_BUCKETNAME,process.env.ADMINPORTAL_BUCKETNAME],f=async s=>{console.info(`EVENT
`+JSON.stringify(s,null,2));let e=0,o=async(n,a)=>{let d={Bucket:n,Key:"branding.json"},c=await(await a.send(new i.GetObjectCommand(d))).Body.transformToString();return console.log("get type from s3, response body",c),JSON.parse(c)},r=[],t=[];return S.map(n=>r.push(o(n,O))),(await Promise.allSettled(r)).map(n=>{n.status==="fulfilled"&&t.push({url:process.env.SP_PORTAL_URL,...n.value})}),t.sort((n,a)=>n.id<a.id?-1:n.id>a.id?1:0),{statusCode:200,headers:{"Access-Control-Allow-Headers":"Content-Type,Authorization,X-Api-Key,Content-Range,X-Requested-With","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS,GET,POST","Access-Control-Expose-Headers":"Content-Range","Content-Range":`brandings ${e+1}-${e+1+t.length}`},body:JSON.stringify({data:t,total:t.length})}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
